classDiagram
    %% Classes principales du syst√®me KamerCare
    
    class User {
        +Long id
        +String name
        +String email
        +String password
        +String role
        +String phone
        +Boolean is_active
        +DateTime email_verified_at
        +String remember_token
        +DateTime created_at
        +DateTime updated_at
        
        +doctor() Doctor
        +patient() Patient
        +scopeActive() Query
        +scopeByRole() Query
        +isDoctor() Boolean
        +isAdmin() Boolean
        +isPatient() Boolean
    }
    
    class Doctor {
        +Long id
        +Long user_id
        +String first_name
        +String last_name
        +Date date_of_birth
        +String email
        +String address
        +String city
        +String specialization
        +Long hospital_id
        +String license_number
        +String phone
        +Text bio
        +Array qualifications
        +Array education
        +Array certifications
        +Array references
        +Integer years_of_experience
        +String office_address
        +Array consultation_hours
        +Decimal consultation_fee
        +Boolean is_available
        +Boolean is_certified
        +DateTime created_at
        +DateTime updated_at
        
        +user() User
        +hospital() Hospital
        +appointments() Appointment
        +medicalRecords() MedicalRecord
        +patients() Patient
        +allPatients() Patient
        +getFullNameAttribute() String
        +getNameAttribute() String
        +scopeAvailable() Query
        +scopeBySpecialization() Query
    }
    
    class Patient {
        +Long id
        +Long user_id
        +String first_name
        +String last_name
        +String email
        +String phone
        +Date date_of_birth
        +String gender
        +String address
        +String emergency_contact_name
        +String emergency_contact_phone
        +Text medical_history
        +Text allergies
        +Text current_medications
        +String blood_type
        +String insurance_number
        +DateTime created_at
        +DateTime updated_at
        
        +user() User
        +appointments() Appointment
        +medicalRecords() MedicalRecord
        +doctors() Doctor
        +allDoctors() Doctor
        +getFullNameAttribute() String
        +getAgeAttribute() Integer
    }
    
    class Appointment {
        +Long id
        +Long patient_id
        +Long doctor_id
        +Long created_by_user_id
        +DateTime appointment_date
        +Integer duration_minutes
        +String status
        +String appointment_type
        +String location
        +Text reason_for_visit
        +Text notes
        +Decimal consultation_fee
        +String payment_status
        +DateTime confirmed_at
        +DateTime cancelled_at
        +String cancellation_reason
        +DateTime created_at
        +DateTime updated_at
        
        +patient() Patient
        +doctor() Doctor
        +medicalRecord() MedicalRecord
        +createdBy() User
        +scopeUpcoming() Query
        +scopeToday() Query
        +scopeByStatus() Query
        +scopeByType() Query
        +scopeVisio() Query
        +scopePresentiel() Query
        +getEndTimeAttribute() DateTime
        +getIsUpcomingAttribute() Boolean
        +getAppointmentTypeLabelAttribute() String
        +getIsVisioAttribute() Boolean
        +getIsPresentielAttribute() Boolean
        +getIsDomicileAttribute() Boolean
        +confirm() void
        +cancel() void
    }
    
    class MedicalRecord {
        +Long id
        +Long patient_id
        +Long doctor_id
        +Long appointment_id
        +Date visit_date
        +Text chief_complaint
        +Text history_of_present_illness
        +Text physical_examination
        +Text vital_signs
        +Text diagnosis
        +Text treatment_plan
        +Text medications_prescribed
        +Text lab_tests_ordered
        +Text follow_up_instructions
        +Date next_appointment_date
        +Text doctor_notes
        +Array attachments
        +DateTime created_at
        +DateTime updated_at
        
        +patient() Patient
        +doctor() Doctor
        +appointment() Appointment
        +scopeRecent() Query
        +scopeByPatient() Query
        +scopeByDoctor() Query
        +getHasAttachmentsAttribute() Boolean
        +addAttachment() void
    }
    
    class Hospital {
        +Long id
        +String nom
        +String ville
        +Text adresse
        +String tel
        +String photo
        +DateTime created_at
        +DateTime updated_at
        
        +doctors() Doctor
        +getFullAddressAttribute() String
        +scopeInCity() Query
        +getPhotoUrlAttribute() String
    }
    
    %% Relations entre les classes
    User ||--o| Doctor : has_one
    User ||--o| Patient : has_one
    User ||--o{ Appointment : created_by
    
    Hospital ||--o{ Doctor : has_many
    
    Doctor ||--o{ Appointment : has_many
    Doctor ||--o{ MedicalRecord : has_many
    Doctor }o--o{ Patient : many_to_many
    Doctor }o--|| Hospital : belongs_to
    
    Patient ||--o{ Appointment : has_many
    Patient ||--o{ MedicalRecord : has_many
    
    Appointment ||--|| MedicalRecord : has_one
    Appointment }o--|| Doctor : belongs_to
    Appointment }o--|| Patient : belongs_to
    
    MedicalRecord }o--|| Doctor : belongs_to
    MedicalRecord }o--|| Patient : belongs_to
    MedicalRecord }o--|| Appointment : belongs_to